!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.jsongin=e():n.jsongin=e()}("undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var n={160:n=>{function e(n,e){e||(e={});var t=null,r=null;class i extends Error{constructor(n){super(`Network error: [${n.status}] ${n.statusText}`),this.name="NetworkError",this.Response=n}}class a extends Error{constructor(n){super(n.error),this.name="ApiError",this.ApiResponse=n}}async function o(o,s,u=null){u||(u={});try{var c=n+o,l="ExchangeApi",f={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};if(t&&t.session_token)f.headers.Authorization=`Bearer ${t.session_token}`;else if("undefined"!=typeof window&&r){var d=null;r.session&&(d=await r.session.getToken()),d&&(f.headers.Authorization=`Bearer ${d}`)}t&&t.User?l+=` as (${t.User.user_name})`:l+=" as (anonymous)",e.log_requests&&console.log(`${l} --\x3e> Server [${o}]`,s);var w=await fetch(c,f);if(!w)throw new Error("Received an empty response from the server.");if(!w.ok)throw new i(w);var y=await w.json();if(e.log_responses&&console.log(`${l} <<-- Server [${o}]`,y),y.error)throw new a(y);return e.GlobalCallback&&"function"==typeof e.GlobalCallback&&await e.GlobalCallback(null,y.result),u.Callback&&"function"==typeof u.Callback&&await u.Callback(null,y.result),y.result}catch(n){var _=null,p=!1;if(n instanceof i)_=new Error(`In command [${o}]; ${n.message}`);else if(n instanceof a)_=new Error(`In command [${o}]; ${n.message}`);else{var g=`In command [${o}]; ${n.message}`;n.cause&&n.cause.code&&(g+=` [${n.cause.code}]`),_=new Error(g)}if(e.GlobalCallback&&"function"==typeof e.GlobalCallback&&(await e.GlobalCallback(_.message,null),p=!0),u.Callback&&"function"==typeof u.Callback&&(await u.Callback(_.message,null),p=!0),e.throw_handled_errors||!p)throw _}}return{Authenticate:async function(n,e,r=!0){return(t=await o("/Session/Signin",{email_address:n,password:e},null))?t.User:null},BrowserClerk:async function(n,e=!0){return r=n,(t={}).User=await o("/User",{},null),t.User?t.User:null},Server:{GetServerInfo:async function(n=null){return await o("/Session/ServerInfo",{},n)},GetServerError:async function(n=null){return await o("/Session/ServerError",{},n)},GetAssetType:async function(n,e=null){return await o("/AssetTypeSpecifications",{asset_type:n},e)},GetUser:async function(n=null){return await o("/User",{},n)},LookupUser:async function(n,e=null){return await o("/User/Lookup",{email_address:n},e)}},Accounts:{List:async function(n=null){return await o("/Accounts",{},n)},Get:async function(n,e=null){return await o("/Account",{account_id:n},e)},Create:async function(n=null){return await o("/Account/Create",{},n)},Destroy:async function(n,e=null){return await o("/Account/Destroy",{account_id:n},e)},Rename:async function(n,e,t=null){return await o("/Account/Rename",{account_id:n,account_name:e},t)},GetAssets:async function(n,e=null){return await o("/Account/Assets",{account_id:n},e)},GetAssetSummary:async function(n,e,t=null){return await o("/Account/AssetSummary",{account_id:n,ResolveFields:e},t)},GetAudits:async function(n,e=null){return await o("/Account/Audits",{account_id:n},e)},Funding:async function(n,e,t,r=null){var i=JSON.parse(JSON.stringify(t));return i.account_id=n,i.funding_action=e,await o("/Account/Funding",i,r)},TestDeposit:async function(n,e,t=null){return await o("/Account/Funding",{funding_action:"deposit.direct",account_id:n,amount_cents:e},t)},TestWithdraw:async function(n,e,t=null){return await o("/Account/Funding",{funding_action:"withdraw.direct",account_id:n,amount_cents:e},t)}},Permissions:{List:async function(n,e=null){return await o("/Permissions",{account_id:n},e)},Set:async function(n,e,t,r=null){return await o("/SetPermission",{account_id:n,user_id:e,permission:t},r)},Unset:async function(n,e,t,r=null){return await o("/UnsetPermission",{account_id:n,user_id:e,permission:t},r)}},Offerings:{List:async function(n,e=null){return await o("/Offerings",{account_id:n},e)},Get:async function(n,e=null){return await o("/Offering",{offering_id:n},e)},Create:async function(n,e,t=null){return await o("/Offering/Create",{account_id:n,asset_type:e},t)},Destroy:async function(n,e=null){return await o("/Offering/Delete",{offering_id:n},e)},Update:async function(n,e,t=null){return await o("/Offering/Save",{offering_id:n,offering_name:e.offering_name,description:e.description,asset_info:e.asset_info,supplier_fee_rate:e.supplier_fee_rate},t)},Activate:async function(n,e=null){return await o("/Offering/Activate",{offering_id:n},e)},Pause:async function(n,e=null){return await o("/Offering/Pause",{offering_id:n},e)}},PublicOfferings:{List:async function(n=null){return await o("/PublicOfferings",{},n)},Get:async function(n,e=null){return await o("/PublicOffering",{offering_id:n},e)},GetMarket:async function(n,e=null){return await o("/PublicOffering/Market",{offering_id:n},e)}},Orders:{List:async function(n,e,t=null){return await o("/Orders",{account_id:n,include_closed:e},t)},Get:async function(n,e=null){return await o("/Order",{order_id:n},e)},Create:async function(n,e,r,i=null){if(!t||!t.User)throw new Error("You must call Authenticate() or Connect() before using the Exchange Client.");return await o("/Order/Create",{user_id:t.User.user_id,account_id:n,offering_id:e,order_type:r.order_type,unit_count:r.unit_count,unit_price:r.unit_price,expiration:r.expiration},i)},Close:async function(n,e=null){return await o("/Order/Close",{order_id:n},e)},GetTransactions:async function(n,e=null){return await o("/Order/Transactions",{order_id:n},e)}}}}n.exports=e,"undefined"!=typeof window&&(void 0===window.SpiritEx&&(window.SpiritEx={}),window.SpiritEx.NewExchangeClient=e)}},e={};return function t(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return n[r](a,a.exports,t),a.exports}(160)})()));